import subprocess

users = [
"D18",
"D33",
"D38",
"D58",
"D58",
"D63",
"D68",
"DB2",
"DB2",
"DE1",
"DE1",
"DE2",
"DE2",
"DX3",
"DX8",
"P33",
"P33",
"P33",
"P68",
"P68",
"P68",
"PB1",
"PB1",
"PB1",
"PB1",
"PB1",
"PB1",
"PB1",
"PB1",
"PB1",
"PB1",
"PB1",
"PB1",
"PB1",
"PB1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE1",
"PE8",
"PE8",
"PE8",
"PX3",
"PX3",
"PX3",
"PX3",
"PX3",
"PX3",
"PX3",
"PX3",
"PX3",
"PX3",
"PX3",
"PX3",
"Q33",
"Q33",
"Q33",
"Q38",
"Q58",
"Q58",
"Q58",
"Q58",
"Q58",
"Q63",
"QB1",
"QB1",
"QB1",
"QB1",
"QB1",
"QB1",
"QB1",
"QB1",
"QE1",
"QE1",
"QE1",
"QE1",
"QE1",
"QE1",
"QE1",
"QE1",
"QE1",
"QE1",
"QE1",
"QE2",
"QE2",
"QE8",
"QE9",
"QX3",
"QX3",
"QX3",
"QX3",
"QX3",
"QX3",
"QX3",
"QX3",
"QX8",
"QX8",
"S38",
"S58",
"S68",
"SE2",
"SE2",
"SX8",
"U38",
"U58",
"U58",
"U58",
"U58",
"U58",
"U63",
"U68",
"U68",
"U68",
"UE2",
"UE2",
"UE2",
"UE2",
"UE2",
"UE2",
"UE2",
"UE2",
"UE2",
"UE2",
"UE2",
"UE2",
"UE2",
"UE2",
"UE8",
"UE8",
"UE8",
"UX3",
"UX3",
"UX3",
"UX3",
"UX3",
"UX3",
"UX3",
]
hostnames = [
"peplgp01304.pi.pvt",
"peplgp01272.pi.pvt",
"peplgp01262.pi.pvt",
"peplap07318.pi.pvt",
"pepldh00109.pi.pvt",
"peplgp01263.pi.pvt",
"peplgp01271.pi.pvt",
"pepldh00167.pi.pvt",
"peplap07409.pi.pvt",
"peplap07532.pi.pvt",
"pepldh00156.pi.pvt",
"peplap07413.pi.pvt",
"pepldh00156.pi.pvt",
"pepldr03063.pi.pvt",
"pepldr03056.pi.pvt",
"pepldr03776.pi.pvt",
"peplap10030.pi.pvt",
"peplap10029.pi.pvt",
"pepldr03372.pi.pvt",
"peplap10028.pi.pvt",
"peplap10027.pi.pvt",
"peplap07447.pi.pvt",
"peplap07442.pi.pvt",
"peplap07446.pi.pvt",
"peplap07445.pi.pvt",
"peplap07440.pi.pvt",
"peplap07438.pi.pvt",
"pepldh00097.pi.pvt",
"pepldh00098.pi.pvt",
"pepldh00099.pi.pvt",
"pepldh00100.pi.pvt",
"pepldh00101.pi.pvt",
"pepldh00102.pi.pvt",
"pepldh00103.pi.pvt",
"pepldh00104.pi.pvt",
"peplap08366.pi.pvt",
"peplap08363.pi.pvt",
"peplap08358.pi.pvt",
"peplap08356.pi.pvt",
"peplap08359.pi.pvt",
"peplap08357.pi.pvt",
"peplap08364.pi.pvt",
"peplap08360.pi.pvt",
"peplap08361.pi.pvt",
"peplap08369.pi.pvt",
"peplap08365.pi.pvt",
"peplap08368.pi.pvt",
"peplap08384.pi.pvt",
"peplap08375.pi.pvt",
"peplap08367.pi.pvt",
"peplap08374.pi.pvt",
"peplap08370.pi.pvt",
"peplap08371.pi.pvt",
"peplap08373.pi.pvt",
"peplap08362.pi.pvt",
"peplap08443.pi.pvt",
"peplap08447.pi.pvt",
"peplap08445.pi.pvt",
"pepldr03063.pi.pvt",
"peplap08444.pi.pvt",
"pepldh00161.pi.pvt",
"pepldh00162.pi.pvt",
"pepldh00160.pi.pvt",
"pepldr03371.pi.pvt",
"peplap10086.pi.pvt",
"peplap10087.pi.pvt",
"pepldr03155.pi.pvt",
"pepldr03154.pi.pvt",
"peplap09111.pi.pvt",
"peplap09112.pi.pvt",
"peplap09130.pi.pvt",
"peplap09133.pi.pvt",
"peplap09129.pi.pvt",
"peplap09132.pi.pvt",
"peplap09128.pi.pvt",
"peplap09131.pi.pvt",
"peplap10873.pi.pvt",
"pepldr03591.corp.pep.pvt",
"peplap09559.pi.pvt",
"peplap09560.pi.pvt",
"pepldr03397.pi.pvt",
"peplgp01268.pi.pvt",
"pepldh00105.pi.pvt",
"pepldh00106.pi.pvt",
"pepldh00107.pi.pvt",
"peplap07393.pi.pvt",
"pepldh00108.pi.pvt",
"peplgp01269.pi.pvt",
"pepldh00101.pi.pvt",
"pepldh00102.pi.pvt",
"pepldh00103.pi.pvt",
"pepldh00104.pi.pvt",
"peplap07415.pi.pvt",
"peplap07414.pi.pvt",
"peplap07412.pi.pvt",
"peplap07411.pi.pvt",
"peplap07908.pi.pvt",
"peplap07909.pi.pvt",
"peplap07910.pi.pvt",
"peplap07959.pi.pvt",
"peplap07960.pi.pvt",
"peplap07961.pi.pvt",
"peplap07905.pi.pvt",
"peplap07906.pi.pvt",
"peplap07907.pi.pvt",
"peplap07924.pi.pvt",
"pepldh00160.pi.pvt",
"peplap07882.pi.pvt",
"pepldh00078.pi.pvt",
"pepldr00556.pi.pvt",
"pepldr03698.pi.pvt",
"pepldr03127.pi.pvt",
"PEPLAP08690.pi.pvt",
"PEPLAP08700.pi.pvt",
"peplap08723.pi.pvt",
"peplap08765.pi.pvt",
"peplap08764.pi.pvt",
"peplap08763.pi.pvt",
"pepldr03128.pi.pvt",
"peplap10213.pi.pvt",
"peplap10212.pi.pvt",
"pepldr02930.pi.pvt",
"t01lap01755.pi.pvt",
"t01lgp00536.pi.pvt",
"peplap07524.pi.pvt",
"pepldh00076.pi.pvt",
"pepldr03055.pi.pvt",
"pepldr00561.pi.pvt",
"peplap07439.pi.pvt",
"pepldh00105.pi.pvt",
"pepldh00106.pi.pvt",
"pepldh00107.pi.pvt",
"pepldh00108.pi.pvt",
"pepldr00563.pi.pvt",
"peplap09558.pi.pvt",
"peplap09557.pi.pvt",
"pepldr03349.pi.pvt",
"peplap07448.pi.pvt",
"peplap07449.pi.pvt",
"peplap07450.pi.pvt",
"peplap07457.pi.pvt",
"peplap07456.pi.pvt",
"peplap07458.pi.pvt",
"peplap07474.pi.pvt",
"peplap07473.pi.pvt",
"peplap07485.pi.pvt",
"peplap07484.pi.pvt",
"peplap07489.pi.pvt",
"peplap07488.pi.pvt",
"pepldh00077.pi.pvt",
"pepldh00078.pi.pvt",
"peplap09987.pi.pvt",
"peplap09988.pi.pvt",
"pepldr03553.pi.pvt",
"pepldr03123.pi.pvt",
"peplap09079.pi.pvt",
"peplap09078.pi.pvt",
"peplap09142.pi.pvt",
"peplap09141.pi.pvt",
"peplap09140.pi.pvt",
"peplap09139.pi.pvt",
]
outputs = []

f = open("finalOutput.txt", "a")

for i,user in enumerate(users):
    try: 
        output = subprocess.check_output("pbrun -u {}adm -h {} bash -c '{}'".format(user.lower(), hostnames[i], '. /etc/os-release; echo "$PRETTY_NAME"'), shell=True)
    except:
        output = "Error in connecting to the server\n"
    f.write(user+"," + hostnames[i]+"," + output)

f.close()